<!DOCTYPE html>
<html lang="en-us">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">
<title>Real life fit example: Experiment at GALAXI -- BornAgain</title>


<link href="https://scgmlz.github.io/BornAgain-website//css/bootstrap.min.css" rel="stylesheet">

<link href="https://scgmlz.github.io/BornAgain-website//css/theme.css" rel="stylesheet">

<link href="https://scgmlz.github.io/BornAgain-website//css/mathjax-style.css" rel="stylesheet">

<link href="https://scgmlz.github.io/BornAgain-website//css/vs.css" rel="stylesheet">

<link href="https://scgmlz.github.io/BornAgain-website//css/baguetteBox.min.css" rel="stylesheet">
<link href="https://scgmlz.github.io/BornAgain-website//css/gallery-grid.css" rel="stylesheet">

<link href="https://scgmlz.github.io/BornAgain-website/assets/css/bornagain.css" rel="stylesheet">

<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
<link href="https://fonts.googleapis.com/css?family=Libre+Baskerville" rel='stylesheet'  type='text/css'> 
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
  });
  MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });

  MathJax.Hub.Config({
  
  TeX: { equationNumbers: { autoNumber: "AMS" } }
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Register.StartupHook("TeX Jax Ready",function () {
    var TEX = MathJax.InputJax.TeX;
    var PREFILTER = TEX.prefilterMath;
    TEX.Augment({
      prefilterMath: function (math,displaymode,script) {
        if (!displaymode) {math = "\\small{"+math+"}"}
        return PREFILTER.call(TEX,math,displaymode,script);
      }
    });
  });
  </script>

</head>


  <body>
    <header class="hero overlay"><div class="container">
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark bg-primary">
    <a class="navbar-brand" href="https://scgmlz.github.io/BornAgain-website/">
        <img src="https://scgmlz.github.io/BornAgain-website/assets/img/bornagain-logo.png" class="d-inline-block align-top" alt="">
        BornAgain
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo01" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
      <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
        
        
          <li class="nav-item "> <a class="nav-link" href="https://scgmlz.github.io/BornAgain-website/">Home</a></li>
        
          <li class="nav-item "> <a class="nav-link" href="https://scgmlz.github.io/BornAgain-website/gallery/">Gallery</a></li>
        
          <li class="nav-item "> <a class="nav-link" href="https://scgmlz.github.io/BornAgain-website/download/">Download</a></li>
        
          <li class="nav-item "> <a class="nav-link" href="https://scgmlz.github.io/BornAgain-website/post/">News</a></li>
        
          <li class="nav-item active"> <a class="nav-link" href="https://scgmlz.github.io/BornAgain-website/documentation/">Documentation</a></li>
        
          <li class="nav-item "> <a class="nav-link" href="https://scgmlz.github.io/BornAgain-website/contact/">Contact</a></li>
        
          <li class="nav-item "> <a class="nav-link" href="https://scgmlz.github.io/BornAgain-website/about/">About</a></li>
          
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/scgmlz/BornAgain" target="_blank" rel="noopener" aria-label="GitHub">
              <span class="fa fa-github fa-2x"></span>
            </a>
          </li>        
        
      </ul>
    </div>
  </nav>
</div>
  
      <div class="container">
        <div class="row">
          <div class="col-lg-12"> <br></div>
        </div>
      </div>
    </header>

    
  <div class="breadcrumb">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">









 <a href='https://scgmlz.github.io/BornAgain-website/'>Home</a> > <a href='https://scgmlz.github.io/BornAgain-website/documentation/'>Documentation</a> > <a href='https://scgmlz.github.io/BornAgain-website/documentation/sample-models/'>Sample model reference</a> > <a href='https://scgmlz.github.io/BornAgain-website/documentation/sample-models/fitting/'>Fitting</a> > Real life fit example: Experiment at GALAXI

 

 

 

 

   
        </div>
      </div>
    </div>
</div>





    





<div class="container">
  <div class="row">
    <div class="col-md-8">
      
      
  
  

<h3 id="real-life-fit-example-experiment-at-galaxi">Real life fit example: Experiment at GALAXI</h3>

<p>This is an example of real data fit. We use our own measurements performed at the laboratory diffractometer <a href="http://www.fz-juelich.de/jcns/jcns-2//DE/Leistungen/GALAXI/_node.html">GALAXI</a> in Forschungszentrum JÃ¼lich. The example supports <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/importing-experimental-data/">Importing experimental data</a> tutorial.</p>



<div class="galleryscg ">
    <div class="row justify-content-center align-items-center">
      
<figure >
 	  <a href="FitGALAXIData_setup.jpg">
 	  	<img src="FitGALAXIData_setup.jpg" width="450px">
 	  </a>
      <figcaption>
      	<p>Real-space model</p>
      </figcaption>
	</figure>

<figure >
 	  <a href="FitGALAXIData.png">
 	  	<img src="FitGALAXIData.png" width="600px">
 	  </a>
      <figcaption>
      	<p>Intensity image</p>
      </figcaption>
	</figure>


  </div>
</div>




<h4 id="python-script">Python script:</h4>

<p>The file <code>SampleBuilder.py</code> (see below) contains a sample description.</p>

<ul>
<li>Sample represents a 4 layer system (substrate, teflon, hmdso and air) with Ag nanoparticles placed inside the hmdso layer on top of the teflon layer.</li>
<li>Sample is generated with the help of <code>SampleBuilder</code>, which is able to create samples depending from registered parameters.</li>

<li><p>Nanoparticles have a broad Log-normal size distribution.

  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt"> 1</span><span class="lnt"> 2</span><span class="lnt"> 3</span><span class="lnt"> 4</span><span class="lnt"> 5</span><span class="lnt"> 6</span><span class="lnt"> 7</span><span class="lnt"> 8</span><span class="lnt"> 9</span><span class="lnt">10</span><span class="lnt">11</span><span class="lnt">12</span><span class="lnt">13</span><span class="lnt">14</span><span class="lnt">15</span><span class="lnt">16</span><span class="lnt">17</span><span class="lnt">18</span><span class="lnt">19</span><span class="lnt">20</span><span class="lnt">21</span><span class="lnt">22</span><span class="lnt">23</span><span class="lnt">24</span><span class="lnt">25</span><span class="lnt">26</span><span class="lnt">27</span><span class="lnt">28</span><span class="lnt">29</span><span class="lnt">30</span><span class="lnt">31</span><span class="lnt">32</span><span class="lnt">33</span><span class="lnt">34</span><span class="lnt">35</span><span class="lnt">36</span><span class="lnt">37</span><span class="lnt">38</span><span class="lnt">39</span><span class="lnt">40</span><span class="lnt">41</span><span class="lnt">42</span><span class="lnt">43</span><span class="lnt">44</span><span class="lnt">45</span><span class="lnt">46</span><span class="lnt">47</span><span class="lnt">48</span><span class="lnt">49</span><span class="lnt">50</span><span class="lnt">51</span><span class="lnt">52</span><span class="lnt">53</span><span class="lnt">54</span><span class="lnt">55</span><span class="lnt">56</span><span class="lnt">57</span><span class="lnt">58</span><span class="lnt">59</span><span class="lnt">60</span><span class="lnt">61</span><span class="lnt">62</span><span class="lnt">63</span><span class="lnt">64</span><span class="lnt">65</span><span class="lnt">66</span><span class="lnt">67</span><span class="lnt">68</span><span class="lnt">69</span><span class="lnt">70</span><span class="lnt">71</span><span class="lnt">72</span><span class="lnt">73</span><span class="lnt">74</span><span class="lnt">75</span><span class="lnt">76</span><span class="lnt">77</span><span class="lnt">78</span><span class="lnt">79</span><span class="lnt">80</span><span class="lnt">81</span><span class="lnt">82</span><span class="lnt">83</span><span class="lnt">84</span><span class="lnt">85</span><span class="lnt">86</span><span class="lnt">87</span><span class="lnt">88</span><span class="lnt">89</span><span class="lnt">90</span><span class="lnt">91</span><span class="lnt">92</span><span class="lnt">93</span><span class="lnt">94</span><span class="lnt">95</span><span class="lnt">96</span><span class="lnt">97</span><span class="lnt">98</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="sa"></span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">3 layers system (substrate, teflon, air).
</span><span class="s2">Air layer is populated with spheres with some size distribution.
</span><span class="s2">&#34;&#34;&#34;</span>
<span class="kn">import</span> <span class="nn">bornagain</span> <span class="kn">as</span> <span class="nn">ba</span>
<span class="kn">import</span> <span class="nn">ctypes</span>


<span class="k">class</span> <span class="nc">MySampleBuilder</span><span class="p">(</span><span class="n">ba</span><span class="o">.</span><span class="n">IMultiLayerBuilder</span><span class="p">):</span>
    <span class="sa"></span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ba</span><span class="o">.</span><span class="n">IMultiLayerBuilder</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sample</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="c1"># parameters describing the sample</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">radius</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="mf">5.75</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="mf">0.4</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">distance</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="mf">53.6</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disorder</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="mf">10.5</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kappa</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="mf">17.5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ptfe_thickness</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="mf">22.1</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hmdso_thickness</span> <span class="o">=</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">c_double</span><span class="p">(</span><span class="mf">18.5</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">)</span>

        <span class="c1"># register parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registerParameter</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;radius&#34;</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">addressof</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registerParameter</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;sigma&#34;</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">addressof</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sigma</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registerParameter</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;distance&#34;</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">addressof</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">distance</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registerParameter</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;disorder&#34;</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">addressof</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">disorder</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registerParameter</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;kappa&#34;</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">addressof</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kappa</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registerParameter</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;tptfe&#34;</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">addressof</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ptfe_thickness</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">registerParameter</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;thmdso&#34;</span><span class="p">,</span> <span class="n">ctypes</span><span class="o">.</span><span class="n">addressof</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">hmdso_thickness</span><span class="p">))</span>

    <span class="c1"># constructs the sample for current values of parameters</span>
    <span class="k">def</span> <span class="nf">buildSample</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># defining materials</span>
        <span class="n">m_air</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">HomogeneousMaterial</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;Air&#34;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="n">m_Si</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">HomogeneousMaterial</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;Si&#34;</span><span class="p">,</span> <span class="mf">5.78164736e-6</span><span class="p">,</span> <span class="mf">1.02294578e-7</span><span class="p">)</span>
        <span class="n">m_Ag</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">HomogeneousMaterial</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;Ag&#34;</span><span class="p">,</span> <span class="mf">2.24749529E-5</span><span class="p">,</span> <span class="mf">1.61528396E-6</span><span class="p">)</span>
        <span class="n">m_PTFE</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">HomogeneousMaterial</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;PTFE&#34;</span><span class="p">,</span> <span class="mf">5.20508729E-6</span><span class="p">,</span> <span class="mf">1.96944292E-8</span><span class="p">)</span>
        <span class="n">m_HMDSO</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">HomogeneousMaterial</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;HMDSO&#34;</span><span class="p">,</span> <span class="mf">2.0888308E-6</span><span class="p">,</span> <span class="mf">1.32605651E-8</span><span class="p">)</span>

        <span class="c1"># collection of particles with size distribution</span>
        <span class="n">nparticles</span> <span class="o">=</span> <span class="mi">20</span>
        <span class="n">nfwhm</span> <span class="o">=</span> <span class="mf">2.0</span>
        <span class="n">sphere_ff</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">FormFactorFullSphere</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="c1"># sphere_ff = ba.FormFactorTruncatedSphere(</span>
        <span class="c1">#    self.radius.value, self.radius.value*1.5)</span>

        <span class="n">sphere</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">Particle</span><span class="p">(</span><span class="n">m_Ag</span><span class="p">,</span> <span class="n">sphere_ff</span><span class="p">)</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">kvector_t</span><span class="p">(</span><span class="mi">0</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">,</span> <span class="mi">0</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">,</span>
                                <span class="o">-</span><span class="mf">1.0</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">hmdso_thickness</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">sphere</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
        <span class="n">ln_distr</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">DistributionLogNormal</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">radius</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">par_distr</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">ParameterDistribution</span><span class="p">(</span>
            <span class="sa"></span><span class="s2">&#34;/Particle/FullSphere/Radius&#34;</span><span class="p">,</span> <span class="n">ln_distr</span><span class="p">,</span> <span class="n">nparticles</span><span class="p">,</span> <span class="n">nfwhm</span><span class="p">,</span>
            <span class="n">ba</span><span class="o">.</span><span class="n">RealLimits</span><span class="o">.</span><span class="n">limited</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hmdso_thickness</span><span class="o">.</span><span class="n">value</span><span class="o">/</span><span class="mf">2.0</span><span class="p">))</span>
        <span class="c1"># par_distr = ba.ParameterDistribution(</span>
        <span class="c1">#    &#34;/Particle/TruncatedSphere/Radius&#34;, ln_distr, nparticles, nfwhm)</span>
        <span class="c1"># par_distr.linkParameter(&#34;/Particle/TruncatedSphere/Height&#34;)</span>
        <span class="n">part_coll</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">ParticleDistribution</span><span class="p">(</span><span class="n">sphere</span><span class="p">,</span> <span class="n">par_distr</span><span class="p">)</span>

        <span class="c1"># interference function</span>
        <span class="n">interference</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">InterferenceFunctionRadialParaCrystal</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">distance</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="mf">1e6</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">)</span>
        <span class="n">interference</span><span class="o">.</span><span class="n">setKappa</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kappa</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">interference</span><span class="o">.</span><span class="n">setDomainSize</span><span class="p">(</span><span class="mf">20000.0</span><span class="p">)</span>
        <span class="n">pdf</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">FTDistribution1DGauss</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">disorder</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">interference</span><span class="o">.</span><span class="n">setProbabilityDistribution</span><span class="p">(</span><span class="n">pdf</span><span class="p">)</span>

        <span class="c1"># assembling particle layout</span>
        <span class="n">particle_layout</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">ParticleLayout</span><span class="p">()</span>
        <span class="n">particle_layout</span><span class="o">.</span><span class="n">addParticle</span><span class="p">(</span><span class="n">part_coll</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">particle_layout</span><span class="o">.</span><span class="n">setInterferenceFunction</span><span class="p">(</span><span class="n">interference</span><span class="p">)</span>
        <span class="n">particle_layout</span><span class="o">.</span><span class="n">setApproximation</span><span class="p">(</span><span class="n">ba</span><span class="o">.</span><span class="n">ILayout</span><span class="o">.</span><span class="n">SSCA</span><span class="p">)</span>
        <span class="n">particle_layout</span><span class="o">.</span><span class="n">setTotalParticleSurfaceDensity</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># roughness</span>
        <span class="n">r_ptfe</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">LayerRoughness</span><span class="p">(</span><span class="mf">2.3</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">5.0</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">)</span>
        <span class="n">r_hmdso</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">LayerRoughness</span><span class="p">(</span><span class="mf">1.1</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">5.0</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">)</span>

        <span class="c1"># layers</span>
        <span class="n">air_layer</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="n">m_air</span><span class="p">)</span>
        <span class="n">hmdso_layer</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="n">m_HMDSO</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">hmdso_thickness</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">hmdso_layer</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">particle_layout</span><span class="p">)</span>
        <span class="n">ptfe_layer</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="n">m_PTFE</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ptfe_thickness</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">substrate_layer</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">Layer</span><span class="p">(</span><span class="n">m_Si</span><span class="p">)</span>

        <span class="c1"># assembling multilayer</span>
        <span class="n">multi_layer</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">MultiLayer</span><span class="p">()</span>
        <span class="n">multi_layer</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">air_layer</span><span class="p">)</span>
        <span class="n">multi_layer</span><span class="o">.</span><span class="n">addLayerWithTopRoughness</span><span class="p">(</span><span class="n">hmdso_layer</span><span class="p">,</span> <span class="n">r_hmdso</span><span class="p">)</span>
        <span class="n">multi_layer</span><span class="o">.</span><span class="n">addLayerWithTopRoughness</span><span class="p">(</span><span class="n">ptfe_layer</span><span class="p">,</span> <span class="n">r_ptfe</span><span class="p">)</span>
        <span class="n">multi_layer</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">substrate_layer</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">multi_layer</span>
</code></pre></td></tr></table>
</div>
</div>

  
  
  

  
  

<a class="linktofile" href="https://scgmlz.github.io/BornAgain-website/files/python/fitting/ex10_FitGALAXIData/SampleBuilder.py"/>
    SampleBuilder.py
</a>



<br />
<br />
The file <code>FitGALAXIData.py</code> (see below) contains parts related to detector initialization, simulation setup, importing the data and finally fit engine setup.</p></li>

<li><p>The rectangular detector is created to represent PILATUS detector from experiment (line 20).</p></li>

<li><p>In simulation settings beam is initialized and the detector is assigned to the simulation. Region of interest is assigned at line 40 to simulate only small rectangular window. Additionally, a rectangular mask is added to exclude reflected beam from the analysis (line 42).</p></li>

<li><p>Real data is loaded from tiff file into histogram representing the detector.</p></li>

<li><p><code>run_fitting()</code> function contains the initialization of fitting kernel: creattion of simulation, assignment of fit pair, fit parameters selection (line 62).</p></li>

<li><p>Two minimizer strategy is selected - &lsquo;Genetic&rsquo; minimizer starts to investigate broad parameter space, &lsquo;Minuit2&rsquo; minimizer continues to find the local minima.

  <div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="lnt">  1</span><span class="lnt">  2</span><span class="lnt">  3</span><span class="lnt">  4</span><span class="lnt">  5</span><span class="lnt">  6</span><span class="lnt">  7</span><span class="lnt">  8</span><span class="lnt">  9</span><span class="lnt"> 10</span><span class="lnt"> 11</span><span class="lnt"> 12</span><span class="lnt"> 13</span><span class="lnt"> 14</span><span class="lnt"> 15</span><span class="lnt"> 16</span><span class="lnt"> 17</span><span class="lnt"> 18</span><span class="lnt"> 19</span><span class="lnt"> 20</span><span class="lnt"> 21</span><span class="lnt"> 22</span><span class="lnt"> 23</span><span class="lnt"> 24</span><span class="lnt"> 25</span><span class="lnt"> 26</span><span class="lnt"> 27</span><span class="lnt"> 28</span><span class="lnt"> 29</span><span class="lnt"> 30</span><span class="lnt"> 31</span><span class="lnt"> 32</span><span class="lnt"> 33</span><span class="lnt"> 34</span><span class="lnt"> 35</span><span class="lnt"> 36</span><span class="lnt"> 37</span><span class="lnt"> 38</span><span class="lnt"> 39</span><span class="lnt"> 40</span><span class="lnt"> 41</span><span class="lnt"> 42</span><span class="lnt"> 43</span><span class="lnt"> 44</span><span class="lnt"> 45</span><span class="lnt"> 46</span><span class="lnt"> 47</span><span class="lnt"> 48</span><span class="lnt"> 49</span><span class="lnt"> 50</span><span class="lnt"> 51</span><span class="lnt"> 52</span><span class="lnt"> 53</span><span class="lnt"> 54</span><span class="lnt"> 55</span><span class="lnt"> 56</span><span class="lnt"> 57</span><span class="lnt"> 58</span><span class="lnt"> 59</span><span class="lnt"> 60</span><span class="lnt"> 61</span><span class="lnt"> 62</span><span class="lnt"> 63</span><span class="lnt"> 64</span><span class="lnt"> 65</span><span class="lnt"> 66</span><span class="lnt"> 67</span><span class="lnt"> 68</span><span class="lnt"> 69</span><span class="lnt"> 70</span><span class="lnt"> 71</span><span class="lnt"> 72</span><span class="lnt"> 73</span><span class="lnt"> 74</span><span class="lnt"> 75</span><span class="lnt"> 76</span><span class="lnt"> 77</span><span class="lnt"> 78</span><span class="lnt"> 79</span><span class="lnt"> 80</span><span class="lnt"> 81</span><span class="lnt"> 82</span><span class="lnt"> 83</span><span class="lnt"> 84</span><span class="lnt"> 85</span><span class="lnt"> 86</span><span class="lnt"> 87</span><span class="lnt"> 88</span><span class="lnt"> 89</span><span class="lnt"> 90</span><span class="lnt"> 91</span><span class="lnt"> 92</span><span class="lnt"> 93</span><span class="lnt"> 94</span><span class="lnt"> 95</span><span class="lnt"> 96</span><span class="lnt"> 97</span><span class="lnt"> 98</span><span class="lnt"> 99</span><span class="lnt">100</span><span class="lnt">101</span><span class="lnt">102</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="sa"></span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">Real life example: experiment at GALAXY
</span><span class="s2">&#34;&#34;&#34;</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">bornagain</span> <span class="kn">as</span> <span class="nn">ba</span>
<span class="kn">from</span> <span class="nn">SampleBuilder</span> <span class="kn">import</span> <span class="n">MySampleBuilder</span>

<span class="n">wavelength</span> <span class="o">=</span> <span class="mf">1.34</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">angstrom</span>
<span class="n">alpha_i</span> <span class="o">=</span> <span class="mf">0.463</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">deg</span>

<span class="c1"># detector setup as given from instrument responsible</span>
<span class="n">pilatus_npx</span><span class="p">,</span> <span class="n">pilatus_npy</span> <span class="o">=</span> <span class="mi">981</span><span class="p">,</span> <span class="mi">1043</span>
<span class="n">pilatus_pixel_size</span> <span class="o">=</span> <span class="mf">0.172</span>  <span class="c1"># in mm</span>
<span class="n">detector_distance</span> <span class="o">=</span> <span class="mf">1730.0</span>  <span class="c1"># in mm</span>
<span class="n">beam_xpos</span><span class="p">,</span> <span class="n">beam_ypos</span> <span class="o">=</span> <span class="mf">597.1</span><span class="p">,</span> <span class="mf">323.4</span>  <span class="c1"># in pixels</span>


<span class="k">def</span> <span class="nf">create_detector</span><span class="p">():</span>
    <span class="sa"></span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">    Returns a model of the GALAXY detector
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="n">u0</span> <span class="o">=</span> <span class="n">beam_xpos</span><span class="o">*</span><span class="n">pilatus_pixel_size</span>  <span class="c1"># in mm</span>
    <span class="n">v0</span> <span class="o">=</span> <span class="n">beam_ypos</span><span class="o">*</span><span class="n">pilatus_pixel_size</span>  <span class="c1"># in mm</span>
    <span class="n">detector</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">RectangularDetector</span><span class="p">(</span><span class="n">pilatus_npx</span><span class="p">,</span> <span class="n">pilatus_npx</span><span class="o">*</span><span class="n">pilatus_pixel_size</span><span class="p">,</span>
                                      <span class="n">pilatus_npy</span><span class="p">,</span> <span class="n">pilatus_npy</span><span class="o">*</span><span class="n">pilatus_pixel_size</span><span class="p">)</span>
    <span class="n">detector</span><span class="o">.</span><span class="n">setPerpendicularToDirectBeam</span><span class="p">(</span><span class="n">detector_distance</span><span class="p">,</span> <span class="n">u0</span><span class="p">,</span> <span class="n">v0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">detector</span>


<span class="k">def</span> <span class="nf">create_simulation</span><span class="p">():</span>
    <span class="sa"></span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">    Creates and returns GISAS simulation with beam and detector defined
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="n">simulation</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">GISASSimulation</span><span class="p">()</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">setDetector</span><span class="p">(</span><span class="n">create_detector</span><span class="p">())</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">setBeamParameters</span><span class="p">(</span><span class="n">wavelength</span><span class="p">,</span> <span class="n">alpha_i</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">setBeamIntensity</span><span class="p">(</span><span class="mf">1.2e7</span><span class="p">)</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">setRegionOfInterest</span><span class="p">(</span><span class="mf">85.0</span><span class="p">,</span> <span class="mf">70.0</span><span class="p">,</span> <span class="mf">120.0</span><span class="p">,</span> <span class="mf">92.</span><span class="p">)</span>
    <span class="c1"># mask on reflected beam</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">addMask</span><span class="p">(</span><span class="n">ba</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">(</span><span class="mf">101.9</span><span class="p">,</span> <span class="mf">82.1</span><span class="p">,</span> <span class="mf">103.7</span><span class="p">,</span> <span class="mf">85.2</span><span class="p">),</span> <span class="bp">True</span><span class="p">)</span>
    <span class="c1"># detector resolution function</span>
    <span class="c1"># simulation.setDetectorResolutionFunction(</span>
    <span class="c1">#   ba.ResolutionFunction2DGaussian(0.5*pilatus_pixel_size,</span>
    <span class="c1">#      0.5*pilatus_pixel_size))</span>
    <span class="c1"># beam divergence</span>
    <span class="c1"># alpha_distr = ba.DistributionGaussian(alpha_i, 0.02*ba.deg)</span>
    <span class="c1"># simulation.addParameterDistribution(&#34;*/Beam/Alpha&#34;, alpha_distr, 5)</span>
    <span class="k">return</span> <span class="n">simulation</span>


<span class="k">def</span> <span class="nf">load_real_data</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="sa"></span><span class="s2">&#34;galaxi_data.tif.gz&#34;</span><span class="p">):</span>
    <span class="sa"></span><span class="s2">&#34;&#34;&#34;
</span><span class="s2">    Fill histogram representing our detector with intensity data from tif file.
</span><span class="s2">    Returns cropped version of it, which represent the area we are interested in.
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="n">hist</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">IHistogram</span><span class="o">.</span><span class="n">createFrom</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">hist</span>


<span class="k">def</span> <span class="nf">run_fitting</span><span class="p">():</span>
    <span class="n">simulation</span> <span class="o">=</span> <span class="n">create_simulation</span><span class="p">()</span>
    <span class="n">sample_builder</span> <span class="o">=</span> <span class="n">MySampleBuilder</span><span class="p">()</span>
    <span class="n">simulation</span><span class="o">.</span><span class="n">setSampleBuilder</span><span class="p">(</span><span class="n">sample_builder</span><span class="p">)</span>

    <span class="n">real_data</span> <span class="o">=</span> <span class="n">load_real_data</span><span class="p">()</span>

    <span class="n">fit_suite</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">FitSuite</span><span class="p">()</span>
    <span class="n">draw_observer</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">DefaultFitObserver</span><span class="p">(</span><span class="n">draw_every_nth</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">fit_suite</span><span class="o">.</span><span class="n">attachObserver</span><span class="p">(</span><span class="n">draw_observer</span><span class="p">)</span>
    <span class="n">fit_suite</span><span class="o">.</span><span class="n">initPrint</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">fit_suite</span><span class="o">.</span><span class="n">addSimulationAndRealData</span><span class="p">(</span><span class="n">simulation</span><span class="p">,</span> <span class="n">real_data</span><span class="p">)</span>

    <span class="c1"># setting fitting parameters with starting values</span>
    <span class="n">fit_suite</span><span class="o">.</span><span class="n">addFitParameter</span><span class="p">(</span>
        <span class="sa"></span><span class="s2">&#34;*radius&#34;</span><span class="p">,</span> <span class="mf">5.0</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">,</span> <span class="n">ba</span><span class="o">.</span><span class="n">AttLimits</span><span class="o">.</span><span class="n">limited</span><span class="p">(</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">),</span>
        <span class="mf">0.1</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">)</span>
    <span class="n">fit_suite</span><span class="o">.</span><span class="n">addFitParameter</span><span class="p">(</span>
        <span class="sa"></span><span class="s2">&#34;*sigma&#34;</span><span class="p">,</span> <span class="mf">0.55</span><span class="p">,</span> <span class="n">ba</span><span class="o">.</span><span class="n">AttLimits</span><span class="o">.</span><span class="n">limited</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">),</span> <span class="mf">0.01</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">)</span>
    <span class="n">fit_suite</span><span class="o">.</span><span class="n">addFitParameter</span><span class="p">(</span>
        <span class="sa"></span><span class="s2">&#34;*distance&#34;</span><span class="p">,</span> <span class="mf">27.</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">,</span> <span class="n">ba</span><span class="o">.</span><span class="n">AttLimits</span><span class="o">.</span><span class="n">limited</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">70</span><span class="p">),</span>
        <span class="mf">0.1</span><span class="o">*</span><span class="n">ba</span><span class="o">.</span><span class="n">nm</span><span class="p">)</span>

    <span class="n">use_two_minimizers_strategy</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">if</span> <span class="n">use_two_minimizers_strategy</span><span class="p">:</span>
        <span class="n">strategy1</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">AdjustMinimizerStrategy</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;Genetic&#34;</span><span class="p">)</span>
        <span class="n">fit_suite</span><span class="o">.</span><span class="n">addFitStrategy</span><span class="p">(</span><span class="n">strategy1</span><span class="p">)</span>

        <span class="c1"># Second fit strategy will use another algorithm.</span>
        <span class="c1"># It will use best parameters found from previous minimization round.</span>
        <span class="n">strategy2</span> <span class="o">=</span> <span class="n">ba</span><span class="o">.</span><span class="n">AdjustMinimizerStrategy</span><span class="p">(</span><span class="sa"></span><span class="s2">&#34;Minuit2&#34;</span><span class="p">,</span> <span class="sa"></span><span class="s2">&#34;Migrad&#34;</span><span class="p">)</span>
        <span class="n">fit_suite</span><span class="o">.</span><span class="n">addFitStrategy</span><span class="p">(</span><span class="n">strategy2</span><span class="p">)</span>

    <span class="c1"># running fit</span>
    <span class="n">fit_suite</span><span class="o">.</span><span class="n">runFit</span><span class="p">()</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="sa"></span><span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">run_fitting</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div>

  
  
  

  
  

<a class="linktofile" href="https://scgmlz.github.io/BornAgain-website/files/python/fitting/ex10_FitGALAXIData/FitGALAXIData.py"/>
    FitGALAXIData.py
</a>


</p></li>
</ul>


      <div class="container next-prev">
<nav>
  <ul class="pagination pagination-sm justify-content-end"><li class="page-item ">
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/fitting/simultaneous-fit-of-two-datasets/" class="page-link"><i class="fa fa-chevron-left fa-1g "></i>
      </a>
    </li>  

    <li class="page-item ">
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/miscellaneous/" class="page-link"><i class="fa fa-chevron-right fa-1g "></i>
      </a>
    </li></ul>
</nav>
</div>

    </div>
    <div class="col-md-4">
    <ul class="doctree">
    <li class="dd-item parent">
          <i class="fa liOpened li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/"><span>Documentation</span></a>
        <ul>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/introduction/"><span>Introduction</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/introduction/architecture/"><span>Architectural overview</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/introduction/functionality/"><span>Functionality overview</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/getting-started/"><span>Getting started</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/getting-started/quick-install/"><span>Quick installation instructions</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/getting-started/quick-start/"><span>Quick Start</span> </a>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/getting-started/installation/"><span>Detailed installation instructions</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/getting-started/installation/windows/"><span>Installation on Windows</span> </a>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/getting-started/installation/macos/"><span>Installation on MacOS</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/getting-started/installation/macos/advanced-tips/"><span>Advanced tips</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/getting-started/installation/unix-short/"><span>Installation on Unix (short version)</span> </a>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/getting-started/installation/unix-detailed/"><span>Installation on Unix (detailed version)</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/getting-started/installation/unix-detailed/get-source/"><span>Get the source</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/getting-started/installation/unix-detailed/third-party/"><span>Install the third party software</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/getting-started/installation/unix-detailed/build-and-install/"><span>Build and install the framework</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/getting-started/installation/unix-detailed/first-simulation/"><span>Run the first simulation</span> </a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/running-gui/"><span>Using Graphical User Interface</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/running-gui/gui-overview/"><span>BornAgain GUI overview</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/running-gui/gui-fitting/"><span>Fitting in the GUI</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/"><span>Working with Python scripts</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/setup-pycharm-project/"><span>Setup of a PyCharm project</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/basic-simulation-tutorial/"><span>Basic simulation tutorial</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/material-types/"><span>Material types</span> </a>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/detector-types/"><span>Detector types</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/detector-types/spherical-detector/"><span>Spherical detector</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/detector-types/rectangular-detector/"><span>Rectangular detector</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/accessing-simulation-results/"><span>Accessing simulation results</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/particle-positioning/"><span>Particle positioning</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/particle-rotation/"><span>Particle rotation</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/particle-composition/"><span>Particle composition</span> </a>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/interference/"><span>Interference functions</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/interference/lattice1d/"><span>Interference function of one-dimensional lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/interference/lattice2d/"><span>Interference function of two-dimensional lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/interference/para_radial/"><span>Interference function of radial paracrystal</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/interference/para2d/"><span>Interference function of 2D paracrystal</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/magnetic-particles/"><span>Magnetic particles</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/working-with-sample-parameters/"><span>Working with sample parameters</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/introduction-to-fitting/"><span>Introduction to fitting</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/basic-fitting-tutorial/"><span>Basic fitting tutorial</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/working-with-python/importing-experimental-data/"><span>Importing experimental data</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item parent">
          <i class="fa liOpened li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/"><span>Sample model reference</span></a>
        <ul>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/embedded-particles/"><span>Embedded particles</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/embedded-particles/cylinders-ba/"><span>Cylinders in Born Approximation</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/embedded-particles/cylinders-dwba/"><span>Cylinders in Distorted Wave Born Approximation</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/embedded-particles/size-distribution/"><span>Cylinders with size distribution</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/embedded-particles/size-distribution2/"><span>Two types of cylinders with size distribution</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/embedded-particles/rotated-pyramids/"><span>Rotated Pyramids</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/embedded-particles/cylinders-and-prisms/"><span>Cylinders and Prisms</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/embedded-particles/all-formfactors/"><span>All available form factors</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/layered-structures/"><span>Layered structures</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/layered-structures/buried-particles/"><span>Buried particles</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/layered-structures/correlated-roughness/"><span>Correlated roughness</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/interference-functions/"><span>Interference functions</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/interference-functions/interference-1d-lattice/"><span>Interference 1D Lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/interference-functions/interference-2d-square-lattice/"><span>Interference 2D Square Lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/interference-functions/intereference-2d-rotated-square-lattice/"><span>Interference 2D Rotated Square Lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/interference-functions/interference-2d-centered-square-lattice/"><span>Interference 2D Centered Square Lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/interference-functions/spheres-at-hex-lattice/"><span>Spheres on Hexagonal Lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/interference-functions/cosine-ripples-at-rect-lattice/"><span>Cosine ripples on Rectangular Lattice</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/interference-functions/interference-2d-paracrystal/"><span>Interference 2D Paracrystal</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/interference-functions/interference-1d-radial-paracrystal/"><span>Interference 1D Radial Paracrystal</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/interference-functions/approximation-da/"><span>Size-distribution model: Decoupling Approximation</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/interference-functions/approximation-lma/"><span>Size-distribution model: Local Monodisperse Approximation</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/interference-functions/approximation-ssca/"><span>Size-distribution model: Size-Spacing Coupling Approximation</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/interference-functions/rectangular-grating/"><span>Rectangular grating</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/complex-shapes/"><span>Complex Shapes</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/complex-shapes/core-shell-nanoparticles/"><span>Core shell nanoparticles</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/complex-shapes/hexagonal-lattice-with-basis/"><span>Hexagonal Lattices with Basis</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/complex-shapes/large-particles-formfactor/"><span>Large Particle Form Factor</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/complex-shapes/custom-formfactor/"><span>Custom Form Factor</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/beam-and-detector/"><span>Beam and Detector</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/beam-and-detector/beam-divergence/"><span>Beam divergence</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/beam-and-detector/detector-resolution/"><span>Detector Resolution Function</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/beam-and-detector/offspecular-simulation/"><span>Off-Specular</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/beam-and-detector/rectangular-detector/"><span>Rectangular Detector</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/beam-and-detector/basic-specular-simulation/"><span>Specular scattering</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item parent">
          <i class="fa liOpened li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/fitting/"><span>Fitting</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/fitting/sample-parameters-intro/"><span>Working with sample parameters</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/fitting/fit-cylinders-and-prisms/"><span>Fit cylinders and prisms</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/fitting/fit-with-masks/"><span>Fitting with masks</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/fitting/fit-along-slices/"><span>Fitting along slices</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/fitting/simultaneous-fit-of-two-datasets/"><span>Simultaneous fit of two datasets</span> </a>
    </li>
    <li class="dd-item active">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/fitting/fit-galaxi-data/"><span>Real life fit example: Experiment at GALAXI</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/miscellaneous/"><span>Miscellaneous</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/miscellaneous/accessing-simulation-results/"><span>Accessing simulation results - example</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/sample-models/miscellaneous/axes-in-different-units/"><span>Plotting with axes in different units</span> </a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/getting-help/"><span>Getting help</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/getting-help/troubleshooting/"><span>Troubleshooting</span> </a>
    </li>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/getting-help/frequently-asked-questions/"><span>Frequently asked questions</span> </a>
    </li>
        </ul>
    </li>
    <li class="dd-item"><i class="fa liClosed li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/developers-corner/"><span>Developer&#39;s corner</span></a>
        <ul>
    <li class="dd-item">
      <i class="fa liSingle li-item-icon"></i>
      <a href="https://scgmlz.github.io/BornAgain-website/documentation/developers-corner/contribute-to-documentation/"><span>Contribute to documentation</span> </a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    </ul>

    </div>
  </div>
</div>    <hr>
    
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                  <ul class="list-inline text-center">
                    
                      <li class="list-inline-item social">
                        <a href="mailto:contact@bornagainproject.org">
                          <span class="fa-stack fa-lg">
                            <i class="fa fa-circle fa-stack-2x"></i>
                            <i class="fa fa-envelope-o fa-stack-1x fa-inverse"></i>
                          </span>
                        </a>
                      </li>
                    
                    
                    <li class="list-inline-item social">
                      <a href="https://github.com/scgmlz/BornAgain">
                        <span class="fa-stack fa-lg">
                          <i class="fa fa-circle fa-stack-2x"></i>
                          <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                        </span>
                      </a>
                    </li>
                    
                  </ul>
                  <p class="copyright text-muted"></p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://scgmlz.github.io/BornAgain-website//js/bootstrap.min.js"></script>
    
    <script src="https://scgmlz.github.io/BornAgain-website//js/baguetteBox.min.js"></script>
    <script>
      baguetteBox.run('.galleryscg');
    </script>    
    
    <script src="https://scgmlz.github.io/BornAgain-website//js/theme.js"></script>
    <script src="https://scgmlz.github.io/BornAgain-website/assets/js/bornagain.js"></script>
    
    
</body>
</html>


